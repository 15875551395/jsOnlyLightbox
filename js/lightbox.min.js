function Lightbox(){this.opt,this.box,this.wrapper;var a=this,b='<span class="lightbox-close" id="lightbox-close">X</span><div class="lightbox-contentwrapper" id="lightbox-contentwrapper" ></div>',c=function(a,b,c,d){c.bind(this,d),a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},d=function(a,b){return a&&b?new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className):void 0},e=function(a,b){return a&&b?(a.className=a.className.replace(new RegExp("(?:^|\\s)"+b+"(?!\\S)"),""),a):void 0},f=function(a,b){return a&&b?(d(a,b)||(a.className+=" "+b),a):void 0};this.load=function(d){if(d&&(this.opt=d),d&&d.boxId)this.box=document.getElementById(d.boxId),this.box.innerHTML=b;else{var e=document.createElement("div");e.setAttribute("class","lightbox"),this.box=e,this.box.innerHTML=b,document.getElementsByTagName("body")[0].appendChild(this.box),this.wrapper=document.getElementById("lightbox-contentwrapper")}d&&d.closeId&&c(document.getElementById(d.closeId),"click",function(){a.closeLightbox()}),d.closeOnClick||c(this.box,"click",function(){a.closeLightbox()}),d.responsive&&c(window,"resize",function(){a.resize()});for(var f=document.getElementsByTagName("img"),g=function(b){c(b,"click",function(){""!==this.getAttribute("data-lightbox")?a.openLightbox(this.getAttribute("data-lightbox")):a.openLightbox(this)})},h=0;h<f.length;h++)null!==f[h].getAttribute("data-lightbox")&&g(f[h])},this.closeLightbox=function(){e(a.box,"active"),e(a.wrapper,"active"),document.getElementsByTagName("body")[0].setAttribute("style","overflow = auto")},this.resize=function(){a.box.setAttribute("style","padding-top: "+Math.floor((window.innerHeight-a.wrapper.offsetHeight)/2)+"px")},this.refresh=function(a){a&&(this.opt=a),this.load(this.opt)},this.openLightbox=function(b){if(!b)return!1;if("object"==typeof b)b=b;else{if("string"!=typeof b)return!1;var c=document.createElement("img");c.setAttribute("src",b),b=c}document.getElementsByTagName("body")[0].setAttribute("style","overflow = hidden"),this.box.setAttribute("style","padding-top: 0"),this.wrapper.innerHTML="",b=b.cloneNode(!0),b.setAttribute("class"," "),this.wrapper.appendChild(b.cloneNode(!0)),f(this.box,"active");var e=setInterval(function(){d(a.box,"active")&&(setTimeout(function(){a.resize(),setTimeout(function(){f(a.wrapper,"active")},1)},1),clearInterval(e))},10)}}